<html>
<title>UserProfile</title>
<body>
	<form method="post" id="myform" action="javascript:" onsubmit="submitForm()" enctype="application/json">
		<table id="userTable">
			<tr>
				<td>User(id):</td>
				<td><input id="userTxt" type="text" name="user"></td>
			</tr>
			<tr>
				<td>Nome:</td>
				<td><input id="nameTxt" type="text" name="name"></td>
			</tr>
			<tr>
				<td>Idade:</td>
				<td><input id="ageTxt" type="text" name="age"></td>
			</tr>
			<tr>
				<td>Foto(String):</td>
				<td><input id="pictureTxt" type="text" name="picture"></td>
			</tr>
			<tr>
				<td>Data de nascimento (formato dd-MM-yyyy):</td>
				<td><input id="birthDateTxt" type="text" name="birthDate"></td>
			</tr>
			<tr>
				<td>Cidade natal(id)</td>
				<td><input id="homeTownTxt" type="text" name="homeTown"></td>
			</tr>
			<tr>
				<td>Cidade atual(id):</td>
				<td><input id="currentCityTxt" type="text" name="currentCity"></td>
			</tr>
			<tr>
				<td>Gï¿½nero(id):</td>
				<td><input id="genderTxt" type="text" name="gender"></td>
			</tr>
			<tr>
				<td>Status Civil(id):</td>
				<td><input id="userRelationshipTxt" type="text" name="userRelationship">
			</tr>	
			<tr>
				<td></td>
				<td align="right"><input type="submit" value="Enviar"/></td>
			</tr>
		</table>
	</form>
</body>
</html>

<script src="/iface-profile/js/jquery-3.1.0.min.js"></script>

<script>
function formToJSON(){
    var json = '{"user":{"id":'+$("#userTxt").val()+'},"name":"'+$("#nameTxt").val()+'","age":"'+$("#ageTxt").val()+'","picture":"'+$("#pictureTxt").val()+'","birthDate":"'+$("#birthDateTxt").val()+'T00:00:00","homeTown":{"id":'+$("#homeTownTxt").val()+'},"currentCity":{"id":'+$("#currentCityTxt").val()+'},"gender":{"id":'+$("#genderTxt").val()+'},"userRelationship":{"id":'+$("#userRelationshipTxt").val()+'}}';
    return json;
}

function submitForm(){
	var formData = formToJSON();
	alert(formData);
	$.ajax({
		  type: "POST",
		  headers:{
		        "Content-Type":"application/json",
		        "Accept":"application/json"
		  },
		  url: "/iface-profile/service/user_profile",
		  data: formData,
		  success: function(){alert("Sucesso!")},
		  dataType: "json",
		  contentType : "application/json"
		});
}
</script>